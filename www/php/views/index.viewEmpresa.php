<?php require("./php/mapa.php") ?>

<style>
    <?php require('./css/indexEmpresa.css') ?>
</style>

<div class="pagina">
    <div class="datosEmpresa">
        <form method="post">
            <div class="imgMapa">
                <div id="divFotoPerfil" class="inputbox">
                    <canvas id="canvasFotoPerfil" src=<?= $empresa['Avatar'] ?>></canvas>
                    <input type="hidden" id="outputFoto">
                    <input type="file" id="inputFoto" accept="image/*" class="inputbox">
                </div>
                <div class="mapa">
                    <div id="map">
                        <p id="latitud">
                            <?= $latitude ?>
                        </p>
                        <p id="longi">
                            <?= $longitude ?>
                        </p>
                    </div>
                </div>
            </div>
            <div class="datos">
                <div class="inputbox" id="inputBoxNombre">
                    <input type="text" id="username" class="datos" value=<?= $empresa['Nombre_empresa'] ?>
                        value1=<?= $empresa['Nombre_empresa'] ?> required>
                    <label>Nombre empresa</label>
                </div>
                <div class="inputbox" id="inputBoxCorreo">
                    <input type="text" id="correo" class="datos" value=<?= $empresa['Correo'] ?>
                        value1=<?= $empresa['Correo'] ?> required>
                    <label>Correo electronico</label>
                </div>
                <div class="inputbox" id="inputBoxTel">
                    <input type="text" id="telefono" class="datos" value=<?= $empresa['Telefono'] ?>
                        value1=<?= $empresa['Telefono'] ?> required>
                    <label>Telefono</label>
                </div>
                <div class="inputbox" id="inputBoxDir">
                    <input type="text" id="direccion" class="datos" value="<?= $empresa['Direccion'] ?>"
                        value1="<?= $empresa['Direccion'] ?>" required>
                    <label>Direccion</label>
                </div>
                <div class="inputbox" id="inputBoxDir">
                    <input type="password" id="contrasenia" value1="" class="datos">
                    <label>Contraseña</label>
                </div>
                <p>
                    <?= $mensajeUsuario ?>
                </p>
                <button type="submit">Guardar cambios</button>
            </div>

        </form>
    </div>
    <div class="tabla">
        <?php if (isset($productos[0])) { ?>
            
            <table class="tablaProduct">
                <tr>
                    <th>
                        Imagen
                    </th>
                    <th>
                        Nombre
                    </th>
                    <th>
                        Precio
                    </th>
                    <th>
                        Editar
                    </th>
                    <th>
                        Borrar
                    </th>
                </tr>
                <?php for ($i = 0; $i < count($productos); $i++) { ?>
                    <tr>
                        <td class="imagen">
                            <img src=<?= $productos[$i]['Foto'] ?> alt=<?= $productos[$i]['Titulo'] ?>>
                        </td>
                        <td class="titulo">
                            <?= $productos[$i]['Titulo'] ?>
                        </td>
                        <td class="precio">
                            <?= $productos[$i]['Precio'] . "€" ?>
                        </td>
                        <td class="editar">
                            <button>Editar</button>
                        </td>
                        <td class="Borrar">
                            <button>Borrar</button>
                        </td>
                    </tr>
                <?php } ?>
            </table>
        <?php } else { ?>
            <div id="nada"><svg xmlns="http://www.w3.org/2000/svg" width="180" height="135" fill="none">
                    <path fill="#0A3093"
                        d="M117.036 84.634c-.078-.12-.161-.223-.244-.332a4.766 4.766 0 0 0-3.973-2.404 7.536 7.536 0 0 0-3.016.836l-9.615 4.232c-.655-3.703-1.373-7.27-2.121-10.956-.656-3.245-1.337-6.6-1.976-10.104-.281-1.558-1.857-9.476-4.961-13.049-3.541-4.05-9.495-4.569-13.671-4.569-2.636 0-5.72.125-8.58 1.148a16.123 16.123 0 0 0-9.095 8.468c-1.139 2.477-1.648 5.192-2.142 7.789l-.135.727a116.096 116.096 0 0 1-5.549 19.954c-1.898-1.169-3.947-2.352-5.824-3.271a30.388 30.388 0 0 0-9.136-2.83 1.796 1.796 0 0 0-1.81.862 1.82 1.82 0 0 0 .073 2.014c.146.207.304.404.473.592-1.11.251-2.174.677-3.151 1.262-.967.581-2.19 1.558-2.512 2.923a3.195 3.195 0 0 0 .52 2.524c1.477 2.295 3.36 2.196 4.868 2.118.322 0 .64-.031.962-.026 2.844.037 5.974 2.363 7.675 4.507.619.784 1.269 1.625 1.94 2.497-2.34 4.959-4.275 10.068-3.277 15.422.567 3.037 2.184 6.843 3.677 8.671 1.222 1.495 3.5 4.273 9.214 4.273h38.527c2.824 0 6.848-2.326 9.017-7.435 1.341-3.157.567-10.624-.52-18.059a151.77 151.77 0 0 0 9.282-6.719l.416-.327c.193.022.388.035.582.036a5.323 5.323 0 0 0 3.359-1.21 6.378 6.378 0 0 0 2.221-4.673 8.45 8.45 0 0 0-1.498-4.89Z" />
                    <path fill="#CFD8DC"
                        d="M110.39 79.022a.793.793 0 0 1-.426-.125.78.78 0 0 1-.224-1.08 19.159 19.159 0 0 0 3.31-10.071 19.154 19.154 0 0 0-2.556-10.288l-.057-.099a3.924 3.924 0 0 1-.687-1.942 3.979 3.979 0 0 1 .754-2.046l.032-.051c3.91-6.517 5.48-13.698 4.539-20.77V32.5a3.763 3.763 0 0 1 .094-1.89c.192-.43.449-.829.764-1.18l1.435-1.76c5.866-7.18 11.409-13.967 13.328-22.326a.781.781 0 0 1 1.524.348c-2.008 8.702-7.66 15.623-13.645 22.95l-1.42 1.739c-.207.232-.382.49-.52.768-.086.371-.086.757 0 1.127v.052c.993 7.42-.65 14.949-4.747 21.772l-.032.051a2.967 2.967 0 0 0-.52 1.241c.068.423.232.824.479 1.174l.062.104a20.676 20.676 0 0 1-.806 21.984.79.79 0 0 1-.681.368Z" />
                    <path fill="#0B175E"
                        d="M103.396 108.025a.764.764 0 0 0-.38-.581.785.785 0 0 0-.697-.047l-7.16 3.017a68.394 68.394 0 0 1-8.154 3.037 34.07 34.07 0 0 1-17.56.203 69.86 69.86 0 0 1-8.95-3.183l-15.547-6.35a.771.771 0 0 0-.62.006.781.781 0 0 0-.42.456c-1.389 3.946-1.758 7.269-1.17 10.385.566 3.037 2.184 6.843 3.676 8.671 1.222 1.495 3.5 4.273 9.214 4.273h38.527c2.824 0 6.849-2.326 9.017-7.435.889-2.093.957-6.029.224-12.452Z"
                        opacity=".2" />
                    <path fill="#0B175E" fill-rule="evenodd"
                        d="M86.383 61.13a1.934 1.934 0 0 1 1.079-1.858 1.942 1.942 0 0 1 2.728 1.229 1.933 1.933 0 0 1-.68 2.037 1.941 1.941 0 0 1-3.127-1.409ZM66.187 62.411a1.934 1.934 0 0 1 1.08-1.856 1.942 1.942 0 0 1 2.728 1.228 1.933 1.933 0 0 1-.68 2.037 1.942 1.942 0 0 1-3.128-1.409Z"
                        clip-rule="evenodd" />
                    <path fill="#0B175E"
                        d="M74.937 65.75a.78.78 0 0 1-.721-1.077.78.78 0 0 1 .331-.376 8.7 8.7 0 0 1 7.65-.488.78.78 0 1 1-.594 1.443 7.107 7.107 0 0 0-6.286.4.766.766 0 0 1-.38.099Z" />
                    <path fill="#CFD8DC"
                        d="M131.28 73.21a.783.783 0 0 1-.78-.778V5.54a.779.779 0 1 1 1.56 0v66.913a.779.779 0 0 1-.78.758ZM131.043 78.3a1.966 1.966 0 0 1-1.794-1.075 2.159 2.159 0 0 1-.036-1.667 2.67 2.67 0 0 1 1.383-1.464.78.78 0 0 1 1.033.99.778.778 0 0 1-.399.433 1.07 1.07 0 0 0-.556.592.616.616 0 0 0 0 .462.42.42 0 0 0 .317.171.34.34 0 0 0 .25-.047.788.788 0 0 1 1.263-.304.766.766 0 0 1 .203.84 1.684 1.684 0 0 1-1.56 1.069h-.104Z" />
                    <path fill="#90A4AE"
                        d="M150.151 80.626h-.041l-4.628-.255a.784.784 0 0 1-.739-.82.78.78 0 0 1 .822-.737l4.628.254a.779.779 0 1 1-.042 1.558ZM146.091 91.306a.756.756 0 0 1-.52-.197l-2.361-2.077a.783.783 0 0 1-.26-.537.782.782 0 0 1 1.3-.626l2.356 2.077a.777.777 0 0 1-.077 1.223.783.783 0 0 1-.443.137h.005ZM138.851 95.61a.775.775 0 0 1-.764-.643l-.426-2.394a.79.79 0 0 1 1.234-.786c.172.12.289.304.326.51l.426 2.4a.781.781 0 0 1-.634.903l-.162.01ZM144.785 72.62a.782.782 0 0 1-.745-.546.775.775 0 0 1 .297-.873l2.736-1.9a.782.782 0 0 1 .894 1.283l-2.74 1.9a.778.778 0 0 1-.442.135Z" />
                    <path fill="#0B175E"
                        d="M31.37 88.986a.78.78 0 0 1-.722-1.084.78.78 0 0 1 .338-.375c.718-.405 3.12-1.745 4.077-1.87a.79.79 0 0 1 .886.673.785.785 0 0 1-.673.885 20.02 20.02 0 0 0-3.526 1.683.775.775 0 0 1-.38.088ZM31.932 91.203a.78.78 0 0 1-.716-1.078.78.78 0 0 1 .331-.376c.66-.373 2.876-1.599 3.75-1.718a.788.788 0 0 1 .886.672.785.785 0 0 1-.673.885c-1.112.417-2.181.938-3.193 1.558a.787.787 0 0 1-.385.057ZM133.187 3.775a.78.78 0 0 0-1.103 0c-4.721 4.48-8.086 8.686-10.597 13.152-9.111 16.267-13.182 34.788-12.35 56.357a4.418 4.418 0 0 0-7.317 3.578 4.405 4.405 0 0 0 2.951 3.9 4.42 4.42 0 0 0 4.74-1.216c.132 1.63.288 3.276.468 4.938-.452-.11-.905-.192-1.326-.27a.793.793 0 0 0-.787 1.232.795.795 0 0 0 .512.326 9.488 9.488 0 0 1 2.418.649c.36.171.687.405.967.69a.579.579 0 0 0 .13.15c.148.182.262.387.338.608a1.32 1.32 0 0 1-.427 1.49 2.79 2.79 0 0 1-1.653.13l-2.08-.213a.786.786 0 0 0-.861.699.782.782 0 0 0 .7.86l.431.046a4.496 4.496 0 0 0 2.704 4.185c.411 3.52.889 7.103 1.43 10.654a.781.781 0 0 0 .77.665h.119a.773.773 0 0 0 .512-.308.787.787 0 0 0 .144-.58 291.384 291.384 0 0 1-1.446-10.748 7.33 7.33 0 0 0-.905-1.1.726.726 0 0 1-.088-.047 16.187 16.187 0 0 0 2.704-1.413 7.22 7.22 0 0 0 2.73-3.162.785.785 0 0 0-.025-.576.782.782 0 0 0-1.416-.016 5.675 5.675 0 0 1-2.163 2.461 17.823 17.823 0 0 1-3.12 1.558 2.713 2.713 0 0 1-.4-1.397h.067c.271 0 .593.063.936.063a3.238 3.238 0 0 0 1.685-.41 2.86 2.86 0 0 0 1.103-3.313 3.376 3.376 0 0 0-.229-.52c.496-.4.923-.878 1.263-1.417a.79.79 0 0 0-.254-1.075.783.783 0 0 0-1.072.255c-.25.395-.565.746-.93 1.038-.27-.22-.563-.41-.874-.566-3.026-26.434.645-48.48 11.232-67.386 2.428-4.346 5.72-8.416 10.312-12.814a.778.778 0 0 0 .228-.87.772.772 0 0 0-.171-.267Zm-26.952 75.667a2.86 2.86 0 0 1-2.811-3.41 2.855 2.855 0 0 1 2.246-2.246 2.864 2.864 0 0 1 2.938 1.213 2.856 2.856 0 0 1-2.373 4.443Z" />
                    <path fill="#CFD8DC"
                        d="M108.028 128.941H42.03a.781.781 0 0 1-.78-.779.778.778 0 0 1 .78-.779h65.998a.781.781 0 0 1 .78.779.778.778 0 0 1-.78.779ZM141.737 128.941h-20.914a.784.784 0 0 1-.78-.779.779.779 0 0 1 .78-.779h20.914a.781.781 0 0 1 .78.779.778.778 0 0 1-.78.779Z" />
                </svg>
                <p>Nada por aqui...</p>
            </div>
        <?php } ?>
    </div>
</div>
<script src="/js/scriptMapa.js"></script>
<script src="/js/datosEmpresa.js"></script>

<?php require "php/views/partials/scriptError.php" ?>

<?php require("partials/footer.php") ?>